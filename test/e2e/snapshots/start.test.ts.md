# Snapshot report for `test/e2e/start.test.ts`

The actual snapshot is saved in `start.test.ts.snap`.

Generated by [AVA](https://ava.li).

## E2E - init && start command

> Snapshot 1

    `<!DOCTYPE html>âŠ
    <html>âŠ
      <head>âŠ
        <meta http-equiv="content-type" content="text/html; charset=UTF-8" />âŠ
        <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />âŠ
        <title>Decentraland Preview</title>âŠ
        <style>âŠ
          html,âŠ
          body {âŠ
            margin: 0;âŠ
            padding: 0;âŠ
            height: 100%;âŠ
            overflow: hidden;âŠ
            touch-action: none;âŠ
    âŠ
            background: #74a4d5;âŠ
          }âŠ
    âŠ
          #gameContainer {âŠ
            width: 100vw;âŠ
            height: 100vh;âŠ
            position: relative;âŠ
          }âŠ
    âŠ
          #gameContainer.loaded {âŠ
            width: 100%;âŠ
            height: 100%;âŠ
            margin: auto;âŠ
          }âŠ
    âŠ
          #gameContainer.loaded,âŠ
          body {âŠ
            background: #000 url(images/decentraland-connect/decentraland-loading.gif) no-repeat 50% 50% !important;âŠ
            background-size: 150px 150px !important;âŠ
          }âŠ
          @media screen and (min-height: 500px) {âŠ
            body {âŠ
              background: #000 url(images/decentraland-connect/decentraland-loading.gif) no-repeat 50% 50% !important;âŠ
              background-size: 150px 150px !important;âŠ
            }âŠ
          }âŠ
          @media screen and (min-height: 800px) {âŠ
            #gameContainer.loaded,âŠ
            body {âŠ
              background: #000 url(images/decentraland-connect/decentraland-loading.gif) no-repeat 50% 50% !important;âŠ
              background-size: 150px 150px !important;âŠ
            }âŠ
          }âŠ
    âŠ
          * {âŠ
            box-sizing: border-box;âŠ
          }âŠ
    âŠ
          body {âŠ
            color: #fff;âŠ
            font-family: 'open sans', roboto, 'helvetica neue', sans-serif;âŠ
            font-size: 0.8em;âŠ
          }âŠ
    âŠ
          canvas {âŠ
            position: relative;âŠ
            z-index: 1000;âŠ
            width: 100%;âŠ
            height: 100%;âŠ
          }âŠ
    âŠ
          .dcl-loading .progress {âŠ
            display: block;âŠ
          }âŠ
    âŠ
          #overlay {âŠ
            display: block;âŠ
            width: 100%;âŠ
            height: 100%;âŠ
            top: 0;âŠ
            left: 0;âŠ
            right: 0;âŠ
            bottom: 0;âŠ
            z-index: 2;âŠ
    âŠ
            background: #74a4d5;âŠ
            background-position: center center;âŠ
    âŠ
            opacity: 0.15;âŠ
          }âŠ
    âŠ
          .progress {âŠ
            position: absolute;âŠ
            height: 30px;âŠ
            width: 100%;âŠ
            bottom: 0;âŠ
            left: 0;âŠ
            right: 0;âŠ
            border-style: solid;âŠ
            border-width: thick;âŠ
            border-left: none;âŠ
            border-right: none;âŠ
            border-top: 3px solid #000;âŠ
            border-bottom: 3px solid #000;âŠ
            text-align: center;âŠ
            border-color: #000;âŠ
            background: #000;âŠ
            display: none;âŠ
          }âŠ
    âŠ
          .progress .full {âŠ
            float: left;âŠ
            width: 0%;âŠ
            height: 100%;âŠ
            display: inline-flex;âŠ
            background: linear-gradient(270deg, #fc9965 4.62%, #ff5273 58.77%, #de3959 100%);âŠ
          }âŠ
    âŠ
          .progress.loaded {âŠ
            z-index: 9;âŠ
          }âŠ
    âŠ
          .progress.ingame .full {âŠ
            animation: none;âŠ
          }âŠ
    âŠ
          #progress-bar-inner {âŠ
            width: 0%;âŠ
            transition: width 0.2s;âŠ
            animation: none;âŠ
          }âŠ
    âŠ
          .hidden-error {âŠ
            display: none !important;âŠ
          }âŠ
    âŠ
          body.error {âŠ
            background: black !important;âŠ
            background-image: none !important;âŠ
          }âŠ
    âŠ
          body.error #gameContainer {âŠ
            display: none !important;âŠ
          }âŠ
    âŠ
          body.error #progress-bar {âŠ
            display: none !important;âŠ
            z-index: 10;âŠ
          }âŠ
    âŠ
          body.error #gameContainer {âŠ
            background: black !important;âŠ
            background-image: none !important;âŠ
          }âŠ
    âŠ
          @keyframes progress_30 {âŠ
            from {âŠ
              width: 0;âŠ
            }âŠ
    âŠ
            to {âŠ
              width: 30%;âŠ
            }âŠ
          }âŠ
    âŠ
          @keyframes progress_50 {âŠ
            from {âŠ
              width: 30%;âŠ
            }âŠ
    âŠ
            to {âŠ
              width: 50%;âŠ
            }âŠ
          }âŠ
    âŠ
          body.dcl-loading #load-messages-wrapper {âŠ
            display: flex;âŠ
          }âŠ
          #load-messages-wrapper {âŠ
            display: none;âŠ
            justify-content: center;âŠ
            align-items: center;âŠ
            flex-direction: column;âŠ
            z-index: 8;âŠ
    âŠ
            position: fixed;âŠ
            top: 80px;âŠ
    âŠ
            min-width: 100%;âŠ
            padding-left: 0;âŠ
            padding-right: 0;âŠ
    âŠ
            color: white;âŠ
            text-align: center;âŠ
            font-size: 1.25em;âŠ
            font-family: sfsemibold, 'Helvetica Neue', Arial, sans-serif;âŠ
          }âŠ
    âŠ
          #load-messages-wrapper div {âŠ
            max-width: 820px;âŠ
          }âŠ
    âŠ
          @media screen and (min-height: 500px) {âŠ
            #load-messages-wrapper {âŠ
              top: 20%;âŠ
    âŠ
              padding-left: 20%;âŠ
              padding-right: 20%;âŠ
            }âŠ
          }âŠ
          @media screen and (min-height: 800px) {âŠ
            #load-messages-wrapper {âŠ
              top: 35%;âŠ
    âŠ
              padding-left: 10%;âŠ
              padding-right: 10%;âŠ
            }âŠ
          }âŠ
    âŠ
          @media screen and (min-height: 1000px) {âŠ
            #load-messages-wrapper {âŠ
              top: 38%;âŠ
    âŠ
              padding-left: 10%;âŠ
              padding-right: 10%;âŠ
            }âŠ
          }âŠ
    âŠ
          #load-images {âŠ
            max-width: 306px;âŠ
            max-height: 234px;âŠ
          }âŠ
          .load-images-wrapper {âŠ
            height: 234px;âŠ
            margin-bottom: 40px;âŠ
            display: flex;âŠ
            flex-direction: column;âŠ
            align-items: center;âŠ
            justify-content: center;âŠ
          }âŠ
          #subtext-messages-container {âŠ
            bottom: 40px;âŠ
            left: 0;âŠ
            position: fixed;âŠ
    âŠ
            min-width: 100%;âŠ
            padding-left: 20%;âŠ
            padding-right: 20%;âŠ
    âŠ
            text-align: center;âŠ
    âŠ
            font-size: 1em;âŠ
            color: #7d8385;âŠ
          }âŠ
    âŠ
          #subtext-messages-container div {âŠ
            margin: auto;âŠ
          }âŠ
    âŠ
          div#check-wallet-prompt {âŠ
            width: 395px;âŠ
            text-align: center;âŠ
            background: #43474b;âŠ
            border-radius: 100px;âŠ
            color: white;âŠ
            padding: 14px;âŠ
            margin-bottom: 10px;âŠ
          }âŠ
    âŠ
          #eth-connect-advice {âŠ
            display: none;âŠ
          }âŠ
          #eth-sign-advice {âŠ
            display: none;âŠ
          }âŠ
          .login {âŠ
            background: #74a4d5;âŠ
            background-position: left 50% bottom 33px;âŠ
    âŠ
            position: absolute;âŠ
            z-index: 9;âŠ
            top: 0;âŠ
            left: 0;âŠ
            width: 100%;âŠ
            height: 100%;âŠ
          }âŠ
          #eth-login {âŠ
            display: none;âŠ
          }âŠ
          .eth-login-popup {âŠ
            width: 70%;âŠ
            max-width: 650px;âŠ
            height: 446px;âŠ
    âŠ
            position: absolute;âŠ
            left: 50%;âŠ
            top: 40px;âŠ
            transform: translate(-50%, 0);âŠ
            padding: 34px 44px;âŠ
    âŠ
            display: flex;âŠ
            flex-direction: column;âŠ
            align-items: center;âŠ
          }âŠ
          #eth-login-confirmation-wrapper {âŠ
            width: 100%;âŠ
    âŠ
            display: flex;âŠ
            flex-direction: column;âŠ
            align-items: center;âŠ
          }âŠ
          @font-face {âŠ
            font-family: sfregular;âŠ
            src: url(images/decentraland-connect/SF-UI-Text-Regular.otf);âŠ
          }âŠ
          @font-face {âŠ
            font-family: sfsemibold;âŠ
            src: url(images/decentraland-connect/SF-UI-Text-Semibold.otf);âŠ
          }âŠ
          .eth-login-description {âŠ
            color: white;âŠ
            margin-top: 50px;âŠ
            margin-bottom: 50px;âŠ
            text-align: center;âŠ
            font-size: 16px;âŠ
            font-family: sfregular, 'Helvetica Neue', Arial, sans-serif;âŠ
          }âŠ
          .eth-login-welcome {âŠ
            color: white;âŠ
            font-family: sfregular, 'Helvetica Neue', Arial, sans-serif;âŠ
            font-size: 16px;âŠ
            margin-bottom: 2px;âŠ
          }âŠ
          .code {âŠ
            font-family: 'Courier New', Courier, monospace;âŠ
          }âŠ
          .eth-login-logo {âŠ
            width: 262px;âŠ
          }âŠ
          .eth-login-wallet-icon {âŠ
            margin-right: 10px;âŠ
            width: 24px;âŠ
            height: 23px;âŠ
            vertical-align: middle;âŠ
          }âŠ
          .eth-login-tos {âŠ
            max-width: 310px;âŠ
            margin-bottom: 50px;âŠ
            text-align: center;âŠ
          }âŠ
          .eth-login-tos-label {âŠ
            font-size: 13px;âŠ
            font-family: sfregular, 'Helvetica Neue', Arial, sans-serif;âŠ
            color: white;âŠ
          }âŠ
          .eth-login-tos-label > a:any-link {âŠ
            color: white;âŠ
            font-family: sfsemibold, 'Helvetica Neue', Arial, sans-serif;âŠ
          }âŠ
          .eth-login-tos-agree {âŠ
            width: 20px;âŠ
            height: 20px;âŠ
            vertical-align: middle;âŠ
          }âŠ
    âŠ
          .nav-bar {âŠ
            background-color: rgba(0, 0, 0, 0.1);âŠ
            height: 40px;âŠ
            display: flex;âŠ
            position: fixed;âŠ
            top: 0;âŠ
            left: 0;âŠ
            width: 100%;âŠ
            z-index: 3;âŠ
          }âŠ
          .nav-bar-content {âŠ
            position: absolute;âŠ
            right: 50px;âŠ
            height: 100%;âŠ
            display: flex;âŠ
            width: fit-content;âŠ
    âŠ
            align-items: center;âŠ
            vertical-align: middle;âŠ
          }âŠ
          @media screen and (min-width: 1200px) {âŠ
            .nav-bar-content {âŠ
              right: 285px;âŠ
            }âŠ
          }âŠ
          .nav-text {âŠ
            color: white;âŠ
            font-family: sfregular, 'Helvetica Neue', Arial, sans-serif;âŠ
          }âŠ
          .nav-discord {âŠ
            width: fit-content;âŠ
    âŠ
            vertical-align: middle;âŠ
            margin: 6px 0 8px 10px;âŠ
    âŠ
            border: 1px solid rgba(255, 255, 255, 0.6);âŠ
            padding: 4px 12.15px;âŠ
    âŠ
            box-sizing: border-box;âŠ
            border-radius: 6px;âŠ
            text-decoration: none;âŠ
          }âŠ
          .nav-discord-img {âŠ
            width: 14px;âŠ
            vertical-align: middle;âŠ
          }âŠ
          .nav-discord-text {âŠ
            margin-left: 2px;âŠ
            font-size: 9px;âŠ
          }âŠ
          .nav-need-support {âŠ
            width: fit-content;âŠ
            font-size: 11px;âŠ
          }âŠ
    âŠ
          .footer-bar {âŠ
            background: #1c191f;âŠ
            height: 33px;âŠ
            display: flex;âŠ
            position: fixed;âŠ
            bottom: 0;âŠ
            left: 0;âŠ
            width: 100%;âŠ
            z-index: 3;âŠ
          }âŠ
          .footer-bar-content {âŠ
            position: absolute;âŠ
            right: 50px;âŠ
            height: 100%;âŠ
            display: flex;âŠ
            width: fit-content;âŠ
    âŠ
            align-items: center;âŠ
            vertical-align: middle;âŠ
          }âŠ
          @media screen and (min-width: 1200px) {âŠ
            .footer-bar-content {âŠ
              right: 285px;âŠ
            }âŠ
          }âŠ
          .footer-link {âŠ
            margin-left: 34px;âŠ
          }âŠ
          .footer-text {âŠ
            margin-left: 45px;âŠ
            vertical-align: middle;âŠ
            color: #736e7d;âŠ
            font-family: sfregular, 'Helvetica Neue', Arial, sans-serif;âŠ
          }âŠ
          .footer-icon {âŠ
            max-height: 18px;âŠ
          }âŠ
          .loader {âŠ
            --thickness: 5px;âŠ
            --diameter: 35px;âŠ
    âŠ
            border: var(--thickness) solid #f3f3f3;âŠ
            border-top: var(--thickness) solid #ff5273;âŠ
            border-radius: 50%;âŠ
            width: var(--diameter);âŠ
            height: var(--diameter);âŠ
            animation: spin 1.24s linear infinite;âŠ
          }âŠ
    âŠ
          @keyframes spin {âŠ
            0% {âŠ
              transform: rotate(0deg);âŠ
            }âŠ
            100% {âŠ
              transform: rotate(360deg);âŠ
            }âŠ
          }âŠ
    âŠ
          /* Preview only style */âŠ
    âŠ
          .error-overlay-bar {âŠ
            display: none;âŠ
    âŠ
            width: 100%;âŠ
            padding: 5px 0;âŠ
    âŠ
            position: absolute;âŠ
            top: 0%;âŠ
            z-index: 1001;âŠ
    âŠ
            background-color: #de3959;âŠ
          }âŠ
          .error-overlay-title {âŠ
            text-align: center;âŠ
    âŠ
            font-size: 1rem;âŠ
            margin-bottom: 4px;âŠ
          }âŠ
          .error-overlay-description {âŠ
            text-align: center;âŠ
    âŠ
            font-size: 0.85rem;âŠ
          }âŠ
          .error-overlay-button {âŠ
            position: absolute;âŠ
            right: 20px;âŠ
            top: 50%;âŠ
    âŠ
            transform: translate(-50%, -50%);âŠ
    âŠ
            color: white;âŠ
    âŠ
            font-size: 1.5rem;âŠ
            font-weight: 600;âŠ
            cursor: pointer;âŠ
    âŠ
            border: 0;âŠ
            background-color: transparent;âŠ
          }âŠ
          .error-overlay-button:active,âŠ
          .error-overlay-button:focus,âŠ
          .error-overlay-button:focus:active {âŠ
            background-image: none;âŠ
            outline: 0;âŠ
            box-shadow: none;âŠ
          }âŠ
        </style>âŠ
      </head>âŠ
    âŠ
      <body class="dcl-loading">âŠ
        <div id="overlay"></div>âŠ
        <div id="gameContainer"></div>âŠ
    âŠ
        <div id="error-overlay" class="error-overlay-bar">âŠ
          <div class="error-overlay-title"></div>âŠ
          <div class="error-overlay-description"></div>âŠ
          <button class="error-overlay-button" onclick="document.getElementById('error-overlay').style.display = 'none';">âŠ
            â¨¯âŠ
          </button>âŠ
        </div>âŠ
    âŠ
        <script>âŠ
          globalThis.preview = trueâŠ
        </script>âŠ
    âŠ
        <script src="/@/artifacts/index.js"></script>âŠ
    âŠ
        <script>âŠ
          function mockStorage( { toLocalStorageKey = '' }) {âŠ
            let storage = {};âŠ
    âŠ
            function update(){âŠ
              if (toLocalStorageKey !== ''){âŠ
                localStorage.setItem(toLocalStorageKey, JSON.stringify(storage))âŠ
              }âŠ
            }âŠ
            âŠ
            if (toLocalStorageKey !== ''){âŠ
              storage = JSON.parse(localStorage.getItem(toLocalStorageKey) || '{}');âŠ
            }âŠ
    âŠ
            return {âŠ
              setItem: async function(key, value) {âŠ
                storage[key] = value || '';âŠ
                update();âŠ
              },âŠ
              getItem: async function(key) {âŠ
                return (key in storage ? storage[key] : null);âŠ
              },âŠ
              removeItem: async function(key) {âŠ
                delete storage[key];âŠ
                update();âŠ
              },âŠ
              keys: async function() {âŠ
                return Object.keys(storage);âŠ
              }âŠ
            };âŠ
          }âŠ
    âŠ
          function getPlayerSessionKey() {âŠ
            const qs = new URLSearchParams(document.location.search)âŠ
            if (qs.has('PLAYER')){âŠ
              return 'dcl-preview-' + qs.get('PLAYER').toLowerCase().replace(' ', '_');âŠ
            }âŠ
            return '';âŠ
          }âŠ
    âŠ
          function handleError(title, message) {âŠ
            const titleElement = document.getElementsByClassName('error-overlay-title')[0]âŠ
            const descElement = document.getElementsByClassName('error-overlay-description')[0]âŠ
            const containerElement = document.getElementById('error-overlay')âŠ
    âŠ
            titleElement.textContent = '' + title || 'Error'âŠ
    âŠ
            const item = document.createElement('li')âŠ
            item.textContent = ' - ' + message || ''âŠ
            descElement.appendChild(item)âŠ
    âŠ
            containerElement.style.display = 'block'âŠ
          }âŠ
    âŠ
          async function getRendererBaseUrl() {âŠ
            const qs = new URLSearchParams(document.location.search)âŠ
    âŠ
            if (qs.has('renderer')) {âŠ
              return qs.get('renderer')âŠ
            }âŠ
    âŠ
            if (qs.has('renderer-branch')) {âŠ
              return `https://renderer-artifacts.decentraland.org/branch/${qs.get('renderer-branch')}`âŠ
            }âŠ
            âŠ
            if (qs.has('renderer-version')) {âŠ
              return `https://cdn.decentraland.org/@dcl/unity-renderer/${qs.get('renderer-version')}`âŠ
            }âŠ
    âŠ
            return new URL('@/artifacts/unity-renderer', location.toString()).toString()âŠ
          }âŠ
    âŠ
          async function initKernel() {âŠ
            const container = document.getElementById('gameContainer')âŠ
    âŠ
            const DecentralandKernel = globalThis.DecentralandKernelâŠ
    âŠ
            if (!DecentralandKernel) throw new Error('DecentralandKernel could not be loaded')âŠ
    âŠ
            const kernel = await DecentralandKernel.initKernel({âŠ
              kernelOptions: {âŠ
                baseUrl: new URL(`@/artifacts`, location.toString()).toString(),âŠ
                previewMode: true,âŠ
                persistentStorage: mockStorage({âŠ
                  toLocalStorageKey: getPlayerSessionKey()âŠ
                })âŠ
              },âŠ
              rendererOptions: {âŠ
                container,âŠ
                baseUrl: await getRendererBaseUrl()âŠ
              }âŠ
            })âŠ
    âŠ
            const qs = new URLSearchParams(document.location.search)âŠ
            const enableLogs = qs.has('DEBUG_KERNEL_LOG')âŠ
    âŠ
            kernel.on('trackingEvent', ({ eventName, eventData }) => {âŠ
              if (enableLogs) {âŠ
                console.log(`> event`, eventName, eventData)âŠ
              }âŠ
            })âŠ
    âŠ
            kernel.on('openUrl', ({ url }) => {âŠ
              const newWindow = window.open(url, '_blank', 'noopener,noreferrer')âŠ
              if (newWindow != null) newWindow.opener = nullâŠ
            })âŠ
    âŠ
            kernel.on('accountState', (account) => {âŠ
              if (enableLogs) {âŠ
                console.log('> account state', account)âŠ
              }âŠ
            })âŠ
    âŠ
            kernel.on('signUp', ({ email }) => {âŠ
              if (enableLogs) {âŠ
                console.log(`> sign up ${email}`)âŠ
              }âŠ
            })âŠ
    âŠ
            kernel.on('logout', (data) => {âŠ
              if (enableLogs) {âŠ
                console.log(`> logout ${data}`)âŠ
              }âŠ
            })âŠ
    âŠ
            kernel.on('error', (error) => {âŠ
              try {âŠ
                handleError('Critical error', '' + (error.error.message || error.error))âŠ
              } catch {âŠ
                handleError('Critical error', '' + error.error)âŠ
              }âŠ
            })âŠ
    âŠ
            kernel.on('rendererVisible', (event) => {âŠ
              document.getElementById('overlay').style.display = event.visible ? 'none' : 'block'âŠ
            })âŠ
    âŠ
            return kernelâŠ
          }âŠ
    âŠ
          async function initPreview(kernel) {âŠ
            const url = new URLSearchParams(location.search)âŠ
    âŠ
            if (url.has('ENABLE_WEB3')) {âŠ
              if (!globalThis.ethereum) {âŠ
                handleError('Ethereum provider missing', 'There is no Ethereum provider to use')âŠ
              } else {âŠ
                if ('request' in globalThis.ethereum) {âŠ
                  await ethereum.request({ method: 'eth_requestAccounts' })âŠ
                }âŠ
    âŠ
                kernel.authenticate(globalThis.ethereum, false)âŠ
              }âŠ
            } else {âŠ
              kernel.authenticate('wss://mainnet.infura.io/ws/v3/f54f2e10b59647778de06d884121f8fa', true)âŠ
            }âŠ
          }âŠ
    âŠ
          initKernel()âŠ
            .then(initPreview)âŠ
            .catch((err) => {âŠ
              handleError('Error loading kernel', '' + err)âŠ
            })âŠ
        </script>âŠ
      </body>âŠ
    </html>âŠ
    `

## snapshot - dcl help start

> Snapshot 1

    `âŠ
      Usage: [1mdcl start [options][22mâŠ
    âŠ
        [2mOptions:[22mâŠ
    âŠ
          -h, --help                Displays complete helpâŠ
          -p, --port        [port]  Select a custom port for the development serverâŠ
          -d, --no-debug            Disable debugging panelâŠ
          -b, --no-browser          Do not open a new browser windowâŠ
          -w, --no-watch            Do not open watch for filesystem changesâŠ
          -c, --ci                  Run the parcel previewer on a remote unix serverâŠ
          --web3                    Connects preview to browser wallet to use the associated avatar and accountâŠ
          --skip-version-checks     Skip the ECS and CLI version checks, avoid the warning message and launch anywayâŠ
          --skip-build              Skip build and only serve the files in preview modeâŠ
    âŠ
        [2mExamples:[22mâŠ
    âŠ
        - Start a local development server for a Decentraland Scene at port 3500âŠ
    âŠ
          [32m$ dcl start -p 3500[39mâŠ
    âŠ
        - Start a local development server for a Decentraland Scene at a docker containerâŠ
    âŠ
          [32m$ dcl start --ci[39mâŠ
    `
